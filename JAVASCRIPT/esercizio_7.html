<!-- Genera tabelle
    Create una classe tabella che vi permetta di generare nell'html tabelle a piacimento.
    Ogni tabella in fase di creazione deve ricevere 2 parametri. Un array con i nomi delle colonne ed un array di oggetti
    che rappresentano i dati delle righe.

    Cambiando i dati che forniamo alla tabella in fase di creazione, il risultato deve sempre e comunque essere una tabella
    correttamente generata.

    Gestire la tabella con una classe apposita.
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Esercizio #7</title>
</head>
<body>
    <script>
        class Tabella{
            colonne;
            dati;
            
            constructor(colonne, dati){
                this.colonne = colonne;
                this.dati = dati;
                this.generaTabella();
            }

            generaTabella(){
                const tab = document.createElement('table');
                tab.appendChild(this.generaColonne());
                tab.appendChild(this.generaRighe());
                document.querySelector('body').appendChild(tab);
            }

            generaColonne(){
                const header = document.createElement('thead');
                this.colonne.forEach(colonna => {
                    const col = document.createElement('th');
                    col.appendChild(document.createTextNode(colonna));
                    header.appendChild(col);
                });
                return header;
            }

            generaRighe(){
                const body = document.createElement('tbody');
                this.dati.forEach(data =>{
                    const riga = document.createElement('tr');
                    Object.keys(data).forEach(key =>{
                        const col = document.createElement('td');
                        col.appendChild(document.createTextNode(data[key]));
                        riga.appendChild(col);
                    })
                    body.appendChild(riga);
                })
                return body;
            }
        }
        const colonne = ['id', 'nome', 'cognome', 'email', 'codfiscale', 'indirizzo'];
        const dati = [
            {
                id: 1,
                nome: 'Alberto',
                cognome: 'Conte',
                email: 'conte.alberto@gmail.com',
                codFiscale: 'ABC01JKH654KJ4423F',
                indirizzo: 'Via Roma 5, Milano (MI)'
            },
            {
                id: 2,
                nome: 'Luca',
                cognome: 'Rossi',
                email: 'lucarossi58@gmail.com',
                codFiscale: 'KJ5634K6B53B6J5B',
                indirizzo: 'Via Della Crusca 97/A, Rimini (RI)'
            },
            {
                id: 3,
                nome: 'Carlotta',
                cognome: 'Destino',
                email: 'diavoletta888@yahoo.com',
                codFiscale: 'LK34IOKMN53KL4M5',
                indirizzo: 'Strada della Repubblica 201, Palermo (PA)'
            },
            {
                id: 4,
                nome: 'Carlotta',
                cognome: 'Destino',
                email: 'diavoletta888@yahoo.com',
                codFiscale: 'LK34IOKMN53KL4M5',
                indirizzo: 'Strada della Repubblica 201, Palermo (PA)'
            }
        ]
        const tabella = new Tabella(colonne, dati);
    </script>
</body>
</html>